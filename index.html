<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
<body ng-app="myApp">
    <h1>đồ uống rạp </h1>
    <div ng-controller="MathController" >
        <p>loại đồ uống:</p><select ng-options="dependant for dependant in dependants" ng-model="selectedD" ng-init = "true"></select>
        <p>Size: </p>
        <select ng-options="gender for gender in genders" ng-model="selectedG" ng-init="selectedG = true"></select>
        <p>giá: {{price}} VND</p>
        <p>số lượng: <input type="text" ng-model="quantity"/> </p>
        <p> giá : {{empInsurance()}} VND</p>
        <p> tiền ship : {{incomeTax()}} VND</p>
        <div ng-switch on="selectedD">
            <div ng-switch-when="Pepsi"></div>
            <div ng-switch-when="Coca Cola"></div>
            <div ng-switch-when="mirinda"></div>
        </div>
        <div ng-switch on="selectedG">
            <div ng-switch-when="M"></div>
            <div ng-switch-when="L"></div>
            <div ng-switch-when="S"></div>
        </div>

        <p> tổng hóa đơn là: {{totalSalary().toFixed(2) | currency : '' : 0}} VND</p>
    </div>
    <script>
        var app = angular.module('myApp', []);

        app.controller('MathController', function($scope) {
            $scope.price = 0;
            $scope.quantity = 1;
            $scope.genders = ['L' , 'M', 'S'];
            $scope.selectedG = $scope.genders[0];
            $scope.dependants = ['Pepsi', 'Coca Cola', 'Mirinda'];
            $scope.selectedD = $scope.dependants[0];
            $scope.empInsurance = function() {

                return (Number($scope.quantity) * (Number($scope.price)));
            }

            $scope.incomeTax = function() {

                if ($scope.selectedG == "L") {
                    switch($scope.selectedD) {
                        case "Pepsi": $scope.price = 45000;
                            break;
                        case "Coca Cola": $scope.price = 47000;
                            break;
                        case "Mirinda": $scope.price = 60000;
                            break;
                    }
                }
                else if ($scope.selectedG == "S") {
                    switch($scope.selectedD) {
                        case "Pepsi": $scope.price = 25000;
                            break;
                        case "Coca Cola": $scope.price = 15000;
                            break;
                        case "Mirinda": $scope.price = 35000;
                            break;
                    }
                }
                else {
                    switch($scope.selectedD) {
                        case "Pepsi": $scope.price = 23000;
                            break;
                        case "Coca Cola": $scope.price = 18000;
                            break;
                        case "Mirinda": $scope.price = 25000;
                            break;
                    }
                }
                return (Number($scope.quantity) * (Number($scope.price) * 0.1))

            }
            $scope.totalSalary = function(){
                return (Number($scope.quantity) * (Number($scope.price))) + (Number($scope.quantity) * (Number($scope.price) * 0.1));
            }
        });
    </script>

    </body>
</html>